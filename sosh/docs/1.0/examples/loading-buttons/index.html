<!DOCTYPE html><html lang="en" data-bs-theme="auto"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content=""><meta name="author" content="Orange and OUDS Web Sosh contributors"><meta name="generator" content="Astro v5.13.5"><title>Loading buttons Â· OUDS Web Sosh v1.0</title><link rel="canonical" href="https://web.unified-design-system.orange.com/sosh/docs/1.0/examples/loading-buttons/"><script src="/sosh/docs/1.0/assets/js/color-modes.js"></script><link href="/sosh/docs/1.0/dist/css/ouds-web-bootstrap.min.css" rel="stylesheet" integrity="sha384-/sP1huIAS3Kd8ccu+f2AmgKA5CCR3Q81E3qnK9fq8uqUh44+lFrn3g4F9FXP+Sz3"><link rel="apple-touch-icon" href="/sosh/docs/1.0/assets/img/favicons/apple-touch-icon.png" sizes="180x180"><link rel="icon" href="/sosh/docs/1.0/assets/img/favicons/favicon-32x32.png" sizes="32x32" type="image/png"><link rel="icon" href="/sosh/docs/1.0/assets/img/favicons/favicon-16x16.png" sizes="16x16" type="image/png"><link rel="manifest" href="/sosh/docs/1.0/assets/img/favicons/manifest.json"><link rel="mask-icon" href="/sosh/docs/1.0/assets/img/favicons/safari-pinned-tab.svg" color="#000"><link rel="icon" href="/sosh/docs/1.0/assets/img/favicons/favicon.ico"><meta name="msapplication-config" content="/sosh/docs/1.0/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#000"><link href="loading-buttons.css" rel="stylesheet"><style>.bd-placeholder-img{font-size:1.125rem;text-anchor:middle;-webkit-user-select:none;user-select:none}@media (min-width: 768px){.bd-placeholder-img-lg{font-size:3.5rem}}.b-example-divider{width:100%;height:3rem;background-color:#0000001a;border:solid rgba(0,0,0,.15);border-width:1px 0;box-shadow:inset 0 .5em 1.5em #0000001a,inset 0 .125em .5em #00000026}.b-example-vr{flex-shrink:0;width:1.5rem;height:100vh}.bi{vertical-align:-.125em;fill:currentColor}.nav-scroller{position:relative;z-index:2;height:2.75rem;overflow-y:hidden}.nav-scroller .nav{display:flex;flex-wrap:nowrap;padding-bottom:1rem;margin-top:-1px;overflow-x:auto;text-align:center;white-space:nowrap;-webkit-overflow-scrolling:touch}.bd-mode-toggle{z-index:1500}.bd-mode-toggle svg{width:1.25rem;height:1.25rem}.bd-mode-toggle .dropdown-menu .active .bi{display:block!important}
</style></head> <body> <div class="dropdown dropup position-fixed bottom-0 end-0 mb-large me-large bd-mode-toggle"> <button class="btn btn-dropdown d-flex align-items-center dropdown-toggle" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" aria-label="Toggle theme (auto)"> <svg class="bi theme-icon-active" aria-hidden="true"><use href="/sosh/docs/1.0/assets/img/ouds-web-sprite.svg#ui-auto-mode"></use></svg> <span class="visually-hidden" id="bd-theme-text">Toggle mode</span> </button> <ul class="dropdown-menu dropdown-menu-end shadow" aria-labelledby="bd-theme-text"> <li> <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false"> <svg class="bi me-small" aria-hidden="true"><use href="/sosh/docs/1.0/assets/img/ouds-web-sprite.svg#ui-light-mode"></use></svg>
Light
<svg class="bi ms-auto d-none" aria-hidden="true"><use href="/sosh/docs/1.0/assets/img/ouds-web-sprite.svg#check2"></use></svg> </button> </li> <li> <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false"> <svg class="bi me-small" aria-hidden="true"><use href="/sosh/docs/1.0/assets/img/ouds-web-sprite.svg#ui-dark-mode"></use></svg>
Dark
<svg class="bi ms-auto d-none" aria-hidden="true"><use href="/sosh/docs/1.0/assets/img/ouds-web-sprite.svg#check2"></use></svg> </button> </li> <li> <button type="button" class="dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true"> <svg class="bi me-small" aria-hidden="true"><use href="/sosh/docs/1.0/assets/img/ouds-web-sprite.svg#ui-auto-mode"></use></svg>
Auto
<svg class="bi ms-auto d-none" aria-hidden="true"><use href="/sosh/docs/1.0/assets/img/ouds-web-sprite.svg#check2"></use></svg> </button> </li> </ul> </div>  <main class="container-fluid container-max-width"> <h1 class="py-medium">Button loading states</h1> <p>Find here some examples of how to implement a live loading button, for an indeterminate or determinate time. These examples are not part of the OUDS Web library and must be adapted to your project. You can find the code below.</p> <h2 class="py-small">Indeterminate loading</h2> <p>For this example, the time is set to 5 seconds by JavaScript, but in a real project, you just need a callback when the action is finished. An update to the status is done every second to let the user know the download is still ongoing. This interval should be adapted to your context. Each time, a dot is added to the message to make sure it will change and then be vocalized by the screen readers.</p> <div class="row py-xlarge"> <div class="col-8"> <button type="button" class="btn btn-default" id="loading-btn-1">
Download file 1
<svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg" class="loader" aria-hidden="true"> <circle class="loader-inner" cx="20" cy="20" r="17"></circle> </svg> <span role="status" id="loading-msg-1" class="visually-hidden d-none">Downloading file 1</span> </button> <button type="button" class="btn btn-icon btn-default" id="loading-btn-2" title="Download file 2"> <svg width="1rem" height="1rem" fill="currentColor" aria-hidden="true"> <use  xlink:href="/sosh/docs/1.0/assets/img/ouds-web-sprite.svg#download"></use> </svg> <span class="visually-hidden">Download file 2</span> <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg" class="loader" aria-hidden="true"> <circle class="loader-inner" cx="20" cy="20" r="17"></circle> </svg> <span role="status" id="loading-msg-2" class="visually-hidden d-none">Downloading file 2</span> </button> <button type="button" class="btn btn-default" id="loading-btn-3"> <svg width="1rem" height="1rem" fill="currentColor" aria-hidden="true"> <use  xlink:href="/sosh/docs/1.0/assets/img/ouds-web-sprite.svg#download"></use> </svg>
Download file 3
<svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg" class="loader" aria-hidden="true"> <circle class="loader-inner" cx="20" cy="20" r="17"></circle> </svg> <span role="status" id="loading-msg-3" class="visually-hidden d-none">Downloading file 3</span> </button> <a class="btn btn-default" id="loading-btn-4" href="#" role="button">
Download file 4
<svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg" class="loader" aria-hidden="true"> <circle class="loader-inner" cx="20" cy="20" r="17"></circle> </svg> <span role="status" id="loading-msg-4" class="visually-hidden d-none">Downloading file 4</span> </a> </div> </div> <h2 class="py-small">Determinate loading</h2> <p>If known, the loading time must be set directly on the button, through the CSS variable <code>--btn-loading-time</code>. In this example, it is set to 4s for the 1st button, 6s for the 2nd button, 8s for the 3rd button, and 10s for the 4th button. This value will be used for the icon's animation. An update to the status is done every second, giving the percentage of time that has elapsed. This interval should be adapted to your context.</p> <div class="row py-xlarge"> <div class="col-8"> <button type="button" class="btn btn-default" id="loading-btn-5" style="--bs-btn-loading-time: 4s;">
Download file 5
<svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg" class="loader" aria-hidden="true"> <circle class="loader-inner" cx="20" cy="20" r="17"></circle> </svg> <span role="status" id="loading-msg-5" class="visually-hidden d-none">Downloading file 5</span> </button> <button type="button" class="btn btn-icon btn-default" id="loading-btn-6" style="--bs-btn-loading-time: 6s;" title="Download file 6"> <svg width="1rem" height="1rem" fill="currentColor" aria-hidden="true"> <use  xlink:href="/sosh/docs/1.0/assets/img/ouds-web-sprite.svg#download"></use> </svg> <span class="visually-hidden">Download file 6</span> <svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg" class="loader" aria-hidden="true"> <circle class="loader-inner" cx="20" cy="20" r="17"></circle> </svg> <span role="status" id="loading-msg-6" class="visually-hidden d-none">Downloading file 6</span> </button> <button type="button" class="btn btn-default" id="loading-btn-7" style="--bs-btn-loading-time: 8s;"> <svg width="1rem" height="1rem" fill="currentColor" aria-hidden="true"> <use  xlink:href="/sosh/docs/1.0/assets/img/ouds-web-sprite.svg#download"></use> </svg>
Download file 7
<svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg" class="loader" aria-hidden="true"> <circle class="loader-inner" cx="20" cy="20" r="17"></circle> </svg> <span role="status" id="loading-msg-7" class="visually-hidden d-none">Downloading file 7</span> </button> <a class="btn btn-default" id="loading-btn-8" href="#" role="button" style="--bs-btn-loading-time: 10s;">
Download file 8
<svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg" class="loader" aria-hidden="true"> <circle class="loader-inner" cx="20" cy="20" r="17"></circle> </svg> <span role="status" id="loading-msg-8" class="visually-hidden d-none">Downloading file 8</span> </a> </div> </div> <div class="accordion" id="code-accordion"> <div class="accordion-item"> <h2 class="accordion-header"> <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
See Javascript code
</button> </h2> <div id="collapseOne" class="accordion-collapse collapse" data-bs-parent="#code-accordion"> <div class="accordion-body border border-subtle p-none"> <script type="module" src="/sosh/docs/1.0/assets/Code.astro_astro_type_script_index_0_lang.Bfn58FH6.js"></script> <div class="bd-code-snippet bd-example-snippet bd-code-snippet bd-file-ref highlight-container"> <div class="d-flex align-items-center highlight-toolbar ps-large border-bottom border-thin border-default"> <a class="me-4xlarge font-monospace small" href="https://github.com/Orange-OpenSource/Orange-Boosted-Bootstrap/blob/v1.0.0-ouds-web/site/src/assets/examples/loading-buttons/loading-buttons.js"> site/src/assets/examples/loading-buttons/loading-buttons.js </a> </div> <div class="highlight pe-md-4xlarge"> <pre tabindex="0" class="language-js"><code class="language-js"><span class="token comment">// Manage loading buttons looks and statuses</span>
<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token string">'use strict'</span>
  <span class="token keyword">const</span> loadingButtons <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'[id^="loading-btn-"]'</span><span class="token punctuation">)</span>
  loadingButtons<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">loadingButton</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    loadingButton<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// Extract the number from the button's ID</span>
      <span class="token keyword">const</span> num <span class="token operator">=</span> loadingButton<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>loadingButton<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>

      <span class="token comment">// Get the loading time from the CSS variable --bs-btn-loading-time, if specified. Otherwise, it means the loading time is undetermined</span>
      <span class="token keyword">const</span> loadingTime <span class="token operator">=</span> <span class="token function">getComputedStyle</span><span class="token punctuation">(</span>loadingButton<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPropertyValue</span><span class="token punctuation">(</span><span class="token string">'--bs-btn-loading-time'</span><span class="token punctuation">)</span>

      <span class="token comment">// Select the corresponding status message and loading animation elements</span>
      <span class="token keyword">const</span> statusMessage <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">#loading-msg-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>num<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
      <span class="token comment">// Set the interval for updating the status message: it must be adapted to your use case.</span>
      <span class="token comment">// It can be 1000 if loading time is indeterminate, and can be something more adapted if loading time is known</span>
      <span class="token keyword">const</span> interval <span class="token operator">=</span> <span class="token number">1000</span>
      <span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token number">0</span>

      <span class="token comment">// Change the button's appearance by adding a loading class and disabling it</span>
      loadingButton<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>loadingTime <span class="token operator">?</span> <span class="token string">'loading-determinate'</span> <span class="token operator">:</span> <span class="token string">'loading-indeterminate'</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> href <span class="token operator">=</span> loadingButton<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'href'</span><span class="token punctuation">)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>loadingButton<span class="token punctuation">.</span>tagName <span class="token operator">===</span> <span class="token string">'A'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        loadingButton<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-disabled'</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">)</span>
        loadingButton<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'href'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        loadingButton<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'disabled'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// Show the status message and update it every 'interval' seconds</span>
      statusMessage<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'d-none'</span><span class="token punctuation">)</span>
      statusMessage<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> loadingTime <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Downloading file </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>num<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> in </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>loadingTime<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Downloading file </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>num<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token keyword">const</span> updateStatusMessageCall <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>loadingTime<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          counter<span class="token operator">++</span>
          <span class="token comment">// Calculate the percentage of time that has elapsed to update status message</span>
          <span class="token keyword">const</span> percentTime <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>counter <span class="token operator">*</span> interval <span class="token operator">/</span> <span class="token punctuation">(</span>loadingTime<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
          statusMessage<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Downloading file </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>num<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> in </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>loadingTime<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>percentTime<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">%</span><span class="token template-punctuation string">`</span></span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          statusMessage<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>statusMessage<span class="token punctuation">.</span>innerHTML<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> interval<span class="token punctuation">)</span>

      <span class="token comment">// Stop loading after the loading time or after 5 seconds the undetermined loading time of this demo</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token function">clearInterval</span><span class="token punctuation">(</span>updateStatusMessageCall<span class="token punctuation">)</span>
        statusMessage<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Downloading file </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>num<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is complete</span><span class="token template-punctuation string">`</span></span>
        loadingButton<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>loadingTime <span class="token operator">?</span> <span class="token string">'loading-determinate'</span> <span class="token operator">:</span> <span class="token string">'loading-indeterminate'</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>loadingButton<span class="token punctuation">.</span>tagName <span class="token operator">===</span> <span class="token string">'A'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          loadingButton<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-disabled'</span><span class="token punctuation">)</span>
          loadingButton<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'href'</span><span class="token punctuation">,</span> href<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          loadingButton<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'disabled'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// Set focus back to the button for accessibility reasons</span>
        loadingButton<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> loadingTime <span class="token operator">?</span> <span class="token punctuation">(</span>loadingTime<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">5000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> </div> <div class="position-absolute top-0 end-0"> <button type="button" class="btn btn-minimal btn-icon btn-clipboard m-2xsmall" title="Copy live-loading-buttons JS to clipboard"> <svg aria-hidden="true"> <use  xlink:href="/sosh/docs/1.0/assets/img/ouds-web-sprite.svg#copy"></use> </svg> </button> </div> </div> </div> </div> </div> </div> </main>   <script src="/sosh/docs/1.0/dist/js/ouds-web.bundle.min.js" integrity="sha384-iouvBfNay/m9DC56jTa2kUblzVFnppFZ+nNu4BK8Txg/YNGcMZUVQfdy6FUwvNDj" class="astro-vvvwv3sm"></script> <script src="loading-buttons.js" class="astro-vvvwv3sm"></script> </body> </html>